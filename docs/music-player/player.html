<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>播放器</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
    ::-webkit-scrollbar { display: none; }
    .glass-panel {
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
    /* Custom Range Slider */
    input[type=range] {
      -webkit-appearance: none;
      width: 100%;
      background: transparent;
      cursor: pointer;
    }
    input[type=range]:focus { outline: none; }
    
    /* Track */
    input[type=range]::-webkit-slider-runnable-track {
      width: 100%;
      height: 6px;
      cursor: pointer;
      background: #e5e7eb;
      border-radius: 9999px;
    }
    
    /* Thumb */
    input[type=range]::-webkit-slider-thumb {
      height: 16px;
      width: 16px;
      border-radius: 50%;
      background: #1f2937;
      cursor: pointer;
      -webkit-appearance: none;
      margin-top: -5px; /* (trackHeight / 2) - (thumbHeight / 2) */
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    /* Progress Fill (using box-shadow hack for simple range, or JS linear-gradient) */
    /* Let's use JS to update background-size for fill effect */
  </style>
</head>
<body class="bg-gray-100 text-gray-900 h-screen flex flex-col relative overflow-hidden">

  <!-- Fullscreen Blurred Background -->
  <div class="absolute inset-0 z-0 overflow-hidden">
    <img src="https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=800&h=800&fit=crop" class="w-full h-full object-cover opacity-60 scale-125 blur-3xl">
    <div class="absolute inset-0 bg-gradient-to-b from-white/30 to-white/80"></div>
  </div>

  <!-- iOS Status Bar -->
  <div class="h-[54px] w-full flex justify-between items-end px-6 pb-2 text-sm font-medium select-none z-20 relative">
    <span>9:41</span>
    <div class="flex gap-1.5 items-center">
      <i class="fas fa-signal"></i>
      <i class="fas fa-wifi"></i>
      <i class="fas fa-battery-full"></i>
    </div>
  </div>

  <!-- Main Player Content -->
  <div class="flex-1 flex flex-col items-center px-8 pt-6 pb-28 relative z-10 overflow-y-auto no-scrollbar">
    
    <!-- Drag Indicator -->
    <div class="w-10 h-1 rounded-full bg-gray-300 mb-8 opacity-50"></div>

    <!-- Album Art -->
    <div class="w-full aspect-square bg-gray-200 rounded-[32px] shadow-[0_24px_48px_-12px_rgba(0,0,0,0.18)] overflow-hidden mb-10 transform transition-transform hover:scale-[1.02]">
      <img src="https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=600&h=600&fit=crop" class="w-full h-full object-cover">
    </div>

    <!-- Info -->
    <div class="w-full flex justify-between items-center mb-8 px-1">
      <div class="flex-1 min-w-0 pr-4">
        <h2 class="text-2xl font-bold tracking-tight truncate mb-1 text-gray-900">Midnight City</h2>
        <p class="text-lg text-gray-500 font-medium truncate">M83</p>
      </div>
      <button class="w-10 h-10 rounded-full bg-gray-200/50 flex items-center justify-center text-gray-600 hover:bg-gray-200 hover:text-red-500 transition-colors">
        <i class="far fa-heart text-lg"></i>
      </button>
    </div>

    <!-- Progress -->
    <div class="w-full mb-8">
      <input id="progress" type="range" min="0" max="243000" value="84000" />
      <div class="flex justify-between text-xs font-semibold text-gray-500 font-mono mt-2">
        <span id="curTime">01:24</span>
        <span id="duration">04:03</span>
      </div>
    </div>

    <!-- Controls -->
    <div class="w-full flex justify-between items-center mb-10 px-2">
      <button class="text-gray-400 hover:text-gray-800 transition-colors"><i class="fas fa-shuffle text-xl"></i></button>
      
      <div class="flex items-center gap-8">
        <button class="text-gray-800 hover:scale-110 transition-transform"><i class="fas fa-backward-step text-3xl"></i></button>
        <button class="w-20 h-20 rounded-full bg-gray-900 text-white flex items-center justify-center shadow-xl hover:scale-105 active:scale-95 transition-all">
          <i class="fas fa-play text-3xl ml-1"></i>
        </button>
        <button class="text-gray-800 hover:scale-110 transition-transform"><i class="fas fa-forward-step text-3xl"></i></button>
      </div>
      
      <!-- Loop Segmented Control (Replacing single loop button) -->
      <!-- <button class="text-gray-400 hover:text-gray-800 transition-colors"><i class="fas fa-repeat text-xl"></i></button> -->
      <div class="hidden"></div> 
      <!-- Placeholder to keep layout balanced if using absolute, but here flex-between works. 
           Wait, user asked for Segmented Control for Loop. Let's put it below or replace the button.
           Standard layout usually has repeat button on right. Let's try to fit a small segmented control or place it below controls.
           Placing below controls is safer for space. -->
      <button class="text-gray-400 hover:text-gray-800 transition-colors"><i class="fas fa-list text-xl"></i></button>
    </div>

    <!-- Loop Mode Segmented Control (Custom Request) -->
    <div class="w-full bg-gray-200/50 p-1 rounded-xl grid grid-cols-3 gap-1 mb-6">
      <button class="py-1.5 rounded-lg text-xs font-semibold text-gray-500 hover:bg-white/50 transition-all">无循环</button>
      <button class="py-1.5 rounded-lg text-xs font-semibold bg-white text-gray-900 shadow-sm">单曲</button>
      <button class="py-1.5 rounded-lg text-xs font-semibold text-gray-500 hover:bg-white/50 transition-all">列表</button>
    </div>

    <!-- Volume / Device -->
    <div class="w-full flex items-center gap-4 text-gray-500">
      <i class="fas fa-volume-low text-xs"></i>
      <div class="flex-1 h-1 bg-gray-300/50 rounded-full">
        <div class="w-[70%] h-full bg-gray-500 rounded-full"></div>
      </div>
      <i class="fas fa-volume-high text-xs"></i>
    </div>

  </div>

  <!-- Bottom Tab Bar -->
  <div class="h-[84px] bg-white/90 backdrop-blur-md border-t border-gray-200/50 flex justify-around items-start pt-3 pb-8 absolute bottom-0 w-full z-40">
    <button class="flex flex-col items-center gap-1 w-16 text-gray-400 hover:text-gray-600">
      <i class="fas fa-music text-xl"></i>
      <span class="text-[10px] font-medium">音乐库</span>
    </button>
    <button class="flex flex-col items-center gap-1 w-16 text-blue-500">
      <i class="fas fa-compact-disc text-xl"></i>
      <span class="text-[10px] font-medium">播放</span>
    </button>
    <button class="flex flex-col items-center gap-1 w-16 text-gray-400 hover:text-gray-600">
      <i class="fas fa-heart text-xl"></i>
      <span class="text-[10px] font-medium">猫窝</span>
    </button>
  </div>

  <script>
    const slider = document.getElementById('progress');
    const curTime = document.getElementById('curTime');
    const durationEl = document.getElementById('duration');
    let durationMs = parseInt(slider.max, 10);
    let positionMs = parseInt(slider.value, 10);

    function formatTime(ms) {
      const totalSeconds = Math.floor(ms / 1000);
      const m = String(Math.floor(totalSeconds / 60)).padStart(2, '0');
      const s = String(totalSeconds % 60).padStart(2, '0');
      return `${m}:${s}`;
    }

    function updateFill() {
      const percent = Math.min(100, Math.max(0, (slider.value / slider.max) * 100));
      slider.style.background = `linear-gradient(to right, #1f2937 0%, #1f2937 ${percent}%, #e5e7eb ${percent}%, #e5e7eb 100%)`;
    }

    function updateTimes() {
      curTime.textContent = formatTime(parseInt(slider.value, 10));
      durationEl.textContent = formatTime(parseInt(slider.max, 10));
    }

    slider.addEventListener('input', () => {
      updateFill();
      updateTimes();
    });

    slider.addEventListener('change', () => {
      positionMs = parseInt(slider.value, 10);
    });

    updateFill();
    updateTimes();
  </script>
</body>
</html>
